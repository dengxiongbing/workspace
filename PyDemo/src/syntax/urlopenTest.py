from urllib2 import urlopen; 

HTTP_ERR_RETCODE = -1
def openUrl(url, timeout = 10):    
    '''A simple way to open url
       url:   the URI to be opened
       return:the return status code
    '''
    if None == url:
        return HTTP_ERR_RETCODE;
    if (type("") == type(url)) and ("" == url.strip()):
        return HTTP_ERR_RETCODE;
    
    try:
        from urllib2 import socket;
        socket.setdefaulttimeout(timeout)
        from urllib2 import urlopen;
        import inspect;
        print inspect.getsource(urlopen);

        response = urlopen(url,timeout=10);
        if not response:
            return HTTP_ERR_RETCODE;
        try:
            response.close();
        except Exception, closeE:
            print "closeE:" + str(closeE);
            pass;        
        return response.getcode();
    except Exception, e:
        print "e:" + str(e)
        return HTTP_ERR_RETCODE;

if __name__ == '__main__':
    url = "http://10.6.223.23:80";
    url = "http://tcms.oa.com:80";
    retCode = openUrl(url);
    print "return code: " + str(retCode);
    a = True;
    if a: print "abc"
#    response = urlopen('http://www.google.com.hk'); 
#    print 'http header:/n', response.info()  
#    print 'http status:', str(response.getcode()) + ", type:" + str(type(response.getcode()))  
#    print 'url:', response.geturl()  
#    for line in response:
#        print line,  
#    response.close() 